## @Mock
: **가짜 객체**   
실제 객체를 만들어 사용하기에는 시간, 비용이 많이 들거나 객체간 의존성이 강해 구현하기 힘들 경우 가짜 객체를 만들어 사용하는 방법이다.   

### [ Mock 객체가 필요한 경우 ]
- 테스트 작성을 위한 환경 구축이 어려운 경우   
- 테스트가 특정 경우나 순간에 의존적인 경우   
- 테스트 시간이 오래 걸리는 경우 (또한, 성능 문제로 인한 시간을 단축시키기 위해서도 사용)

### [ 기본적인 분류 개념, 테스트 더블 ]
**1. 테스트 더블 (Test Couble)**   
: **테스트계의 스턴트맨** = 즉, 대역   
- 테스트를 진행하기 어려울 경우 이를 대신해 테스트를 진행할 수 있도록 만들어주는 객체   
- Mock 객체와 유사한 의미를 가지며 테스트 더블이 조금 더 상위 의미로 사용됨   

**2. 더미객체 (Dummy Object)**   
- 단순히 인스턴스화 될 수 있는 수준으로만 객체를 구현   
- 인스턴스화 된 객체가 필요할 뿐 **해당 객체의 기능까지는 필요하지 않은 경우**에 사용   

**3. 테스트 스텁 (Test Stub)**   
- 더미 객체보다 조금 더 구현된 객체로 **더미 객체가 실제로 동작하는 것처럼 보이도록 만들어 놓은 객체**   
- 객체의 특정 상태를 가정해 만들어 **특정 값을 리턴**해 주거나 **특정 메시지를 출력**해 주는 작업을 수행   
- **특정 상태를 가정해 하드코딩 된 형태**로 로직에 따른 값의 변경은 테스트할 수 없음   
**즉, 어떤 행위가 호출되었을 때 특정 값으로 반환해주는 형태가 Stub**   

**4. 페이크 객체 (Fake Object)**   
- 여러 상태를 대표할 수 있도록 구현된 객체로 **실제 로직이 구현된 것처럼** 보이게 함   
- 실제 DB에 접속해서 비교할 때와 동일한 모양이 보일 수 있도록 객체 내부에 구현할 수 있음   

  \- 테스트 케이스 작성을 위해 **다른 객체들과의 의존성을 제거**하기 위해 사용   
  
  \- 페이크 객체를 만들 때 복잡도로 인해 노력이 많이 들어갈 경우 적절한 수준에서 구현하거나 Mock 프레임워크를 사용   
  
  \- 페이크 객체를 생성하기 위한 노력이 많이 필요한 경우 실제 객체를 가져와 테스트   
  
**5. 테스트 스파이 (Test Spy)**   
: `@Spy`로 만든 mock 객체는 **진짜 객체**이며 메소드 실행시 **스터빙하지 않으면 기존 객체의 로직을 실행한 값을, 스터빙한 경우에는 스터빙 값을** 반환함   
- 테스트에 사용되는 객체, **메소드의 사용 여부 및 정상 호출 여부를 기록하고 요청시 알려줌**   
- 테스트 더블로 구현된 객체에 자기 자신이 호출되었을 때 확인이 필요한 부분을 기록하도록 구현   
- *특정 테스트 메소드가 몇 번 호출되었는지 필요한 경우* 에는 전역 변수로 카운트를 설정하고 특정 메소드에 카운트를 올리는 부분을 추가한 후 이 카운트를 가져오는 메소드를 추가   
- 특정 메소드가 호출되었을 때 또 다른 메소드가 실행이 되어야 한다와 같은 **행위 기반 테스트가 필요한 경우** 사용   

**6. Mock 객체 (Mock Object)**   
: 샘플 휴대폰 = 즉, **가짜**   
- 행위를 검증하기 위해 사용되는 객체를 지칭하며 수동으로 만들 수도 있고 프레임워크를 통해 만들 수도 있음   
- 행위 기반 테스트는 복잡도나 정확성 등 작성하기 어려운 부분이 많아 상태 기반 테스트가 가능하다면 만들지 않는 것이 좋음   
- Mock 객체는 테스트 더블 하위 객체로써의 좁은 의미와 테스트 더블을 포함한 넓은 의미 이렇게 두가지로 사용될 수 있음   

**Mock Object는 행위 검증(behavior verification)에 사용하고 Stub은 상태 검증(state verification)에 사용**   

`@Mock`으로 만든 mock 객체는 **가짜 객체**이며 그 안에 메소드를 호출해 사용하려면 반드시 stubing을 해야한다.   
스터빙하지 않고 그냥 호출한다면 **primitive type은 0, 참조형은 Null을 반환**한다.   

> [참고](https://www.crocus.co.kr/1555)
[참고](https://effortguy.tistory.com/142)


#### Stubbing
: Mock 객체의 행동을 조작하는 것   

#### stub
- 호출되면 미리 준비된 답변으로 응답   
- 테스트시 프로그램 된 것 이외에는 응답 X   
- 협력객체의 특정 부분이 테스트하기 힘들 경우 stub을 사용하면 수월하게 테스트 가능   

#### mock    
- **다른 테스트 더블과는 다르게 행위 검증 사용을 추구**   
- 행위를 기록하는 식의 로직이 포함됨   
